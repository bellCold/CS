# <u>프로세스 동기화</u>

프로세스 동기화(process synchronization)는 여러 프로세스가 공유 자원을 사용할 때 자원의 접근을 제어하기 위한 기법을 의미합니다. 공유 자원은 여러 프로세스가 같이 사용할 수 있는 자원을
의미하며, 이를 이용해 자원의 접근을 제어하는 것이 프로세스 동기화의 주요 목적입니다.

프로세스 동기화는 여러 가지 방법으로 구현할 수 있습니다. 예를 들어, 세마포어(semaphore)라는 자료구조를 이용하면 프로세스가 공유 자원을 접근하는 것을 제어할 수 있습니다. 세마포어는 값이 0일 때
프로세스의 접근을 차단하고, 값이 1 이상일 때 프로세스의 접근을 허용합니다. 세마포어를 이용해 프로세스가 공유 자원을 접근할 수 있는 경우를 관리할 수 있습니다.

---
***경쟁 조건(Race Condition)***
race condition이란 두 개 이상의 프로세스가 공통 자원을 병행적으로(concurrently) 읽거나 쓰는 동작을 할 때, 공용 데이터에 대한 접근이 어떤 순서에 따라 이루어졌는지에 따라 그 실행 결과가
같지 않고 달라지는 상황을 말한다.
---
***뮤텍스 (mutex)***

뮤텍스는 자원에 접근하기 위해 잠금을 걸고, 작업을 완료한 후에 잠금을 해제하는 과정을 거칩니다. 이를 통해 프로세스가 자원을 접근할 수 있는 경우를 제어할 수 있습니다.

---
***세마포어 (Semaphore)***

세마포어(Semaphore)는 운영 체제에서 여러 프로세스가 공유 자원을 접근할 수 있는 수를 제한하기 위해 사용되는 기법이다. 세마포어는 자원에 접근할 수 있는 프로세스의 수를 제한하기 위해 사용되기 때문에 임계
영역(Critical Section)으로 사용된다. 예를 들어, 세마포어를 이용해 공유 자원에 접근할 수 있는 프로세스의 수를 1로 제한하면 공유 자원에 접근할 수 있는 프로세스가 최대 1개가 된다.
---
***모니터 (Monitor)***

* 세마포는 프로세스간 동기화를 위해 편리하고 효율적으로 쓰일 수 있지만 잘못 사용하면 timing error를 발생시킬 수 있다. -> 사람의 실수 등

* 공유 자원을 내부적으로 숨기고 공유 자원에 접근하기 위한 인터페이스만 제공하여 자원을 보호하고 프로세스간에 동기화를 시킨다.

* 동기화 문제를 해결하기 위해서 우리는 세마포라는 도구를 사용하였다. 하지만 동기화 문제를 해결하는데 세마포만이 사용되지는 않는다. 사실 세마포의 경우 오래된 동기화 도구라고 할 수 있다. 현재 사용되는 도구 중
  하나가 모니터이다. 특히 자바 프로그램에서는 모니터에 대한 활용이 높다. 세마포가 어셈블리 언어에 적합한 도구라면 모니터는 그보다 고수준인 언어의 도구라고 할 수 있다. 자바 -> synchronized

---
***임계 구역(Critical Section)***

* 임계 구역 해결 조건
    * 상호 배제(Mutual Exclusion)
      한 프로세스가 임계구역에 들어가면 다른 프로세스는 임계구역에 들어갈 수 없다.
    * 한정 대기(Bounded Wating)
      어떤 프로세스도 무한대기(Infinite Postpone)하지 않아야한다. 특정 프로세스가 임계구역에 진입하지 못하면 안된다.
    * 진행의 융통성(Progress Flexibility)
      한 프로세스가 다른 프로세스의 진행을 방해해서는 안된다.

---
***Deadlock 과 Starvation***

* Deadlock(교착 상태)
    * 두 개 이상의 작업이 서로 상대방의 작업이 끝나기만을 기다리고 있기 때문에 다음 단계로 진행하지 못하는 상태
* Starvation(기아 상태)
    * 특정 프로세스의 우선순위가 낮아서 원하는 자원을 계속 할당받지 못하는 상태

둘의 차이 -> 둘 다 자원의 할당을 계속해서 대기한다는 점에서 비슷한 부분이 있으나 데드락은 프로세스의 상태 중 blocked 상태에서 발생하며, 기아 상태는 ready 상태에서 발생한다. 데드락은 절대 발생하지
않는 이벤트를 대기하고 있지만, 기아 상태는 CPU의 할당을 대기하기 때문에 일어나지 않는 상황을 대기하는 것과는 다르다. 특히 기아 상태는 CPU의 스케줄링과 밀접한 관련이 있다는 점에서 데드락과 구분된다.
---
***Classical Problems of Synchronization***

* Bounded Buffer Problem
    * 생산자가 버퍼의 빈 슬롯에 데이터를 삽입하려고 합니다. 소비자는 채워진 슬롯에서 데이터를 제거하려고 합니다. 이 두 프로세스는 동시에 실행되는 경우 예상치 못한 문제가 발생할 수 있습니다.

* Readers and Writers Problem
    * Writers는 데이터 베이스를 수정하는 역할을 하고, Readers는 그 데이터 베이스를 읽어들이는 역할만 합니다.
* Dining Philosophers Problem
    * 식사하는 철학자 문제(The Dining-Philosophers Problem)는 여러 프로세스에게 제한된 리소스를 할당하는 상황에서 발생할 수 있는 문제입니다.

***Busy Waiting(Spin lock)***

* OS에서는 원하는 자원을 얻기 위해 기다리는 것이 아니라 권한을 얻을 때까지 확인하는 것을 의미한다.
* CPU의 자원을 쓸데 없이 낭비하기 때문에 좋지 않은 쓰레드 동기화 방식이다.